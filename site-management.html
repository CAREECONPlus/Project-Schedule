<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁèæÂ†¥ÁÆ°ÁêÜ - Ê°à‰ª∂ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/site-management.css">
</head>
<body>
    <!-- „Éò„ÉÉ„ÉÄ„Éº -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <h1 class="header-title">ÁèæÂ†¥ÁÆ°ÁêÜ</h1>
                <nav class="header-nav">
                    <a href="index.html" class="nav-link">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ</a>
                    <a href="site-management.html" class="nav-link active">ÁèæÂ†¥ÁÆ°ÁêÜ</a>
                    <a href="gantt-chart.html" class="nav-link">Â∑•Á®ãË°®</a>
                </nav>
                <div class="header-actions">
                    <button class="btn btn-outline" id="refreshBtn">
                        <span class="btn-icon">üîÑ</span>
                        Êõ¥Êñ∞
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
    <main class="main">
        <div class="container">
            <!-- „Çπ„ÉÜ„Éº„Çø„ÇπÊ¶ÇË¶Å -->
            <section class="overview-section">
                <div class="row">
                    <div class="col-3">
                        <div class="overview-card pending">
                            <div class="overview-icon">üìã</div>
                            <div class="overview-content">
                                <div class="overview-number" id="pendingCount">0</div>
                                <div class="overview-label">ÊñΩÂ∑•Ââç</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="overview-card active">
                            <div class="overview-icon">üèóÔ∏è</div>
                            <div class="overview-content">
                                <div class="overview-number" id="activeCount">0</div>
                                <div class="overview-label">ÊñΩÂ∑•‰∏≠</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="overview-card urgent">
                            <div class="overview-icon">‚ö†Ô∏è</div>
                            <div class="overview-content">
                                <div class="overview-number" id="urgentCount">0</div>
                                <div class="overview-label">Ë¶ÅÊ≥®ÊÑè</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-3">
                        <div class="overview-card completed">
                            <div class="overview-icon">‚úÖ</div>
                            <div class="overview-content">
                                <div class="overview-number" id="completedCount">0</div>
                                <div class="overview-label">‰ªäÊúàÂÆå‰∫Ü</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- „Éï„Ç£„É´„Çø„Éº -->
            <section class="filter-section">
                <div class="card">
                    <div class="card-body">
                        <div class="row align-items-center">
                            <div class="col-3">
                                <div class="form-group">
                                    <select class="form-control" id="statusFilter">
                                        <option value="">ÂÖ®„Å¶„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ</option>
                                        <option value="ÂèóÊ≥®">ÂèóÊ≥®</option>
                                        <option value="ÊñΩÂ∑•Ââç">ÊñΩÂ∑•Ââç</option>
                                        <option value="ÊñΩÂ∑•‰∏≠">ÊñΩÂ∑•‰∏≠</option>
                                        <option value="ÊñΩÂ∑•ÂÆå‰∫Ü">ÊñΩÂ∑•ÂÆå‰∫Ü</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <select class="form-control" id="managerFilter">
                                        <option value="">ÂÖ®„Å¶„ÅÆÁèæÂ†¥ÁÆ°ÁêÜËÄÖ</option>
                                        <!-- ÂãïÁöÑ„Å´ËøΩÂä† -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-3">
                                <div class="form-group">
                                    <select class="form-control" id="urgencyFilter">
                                        <option value="">Á∑äÊÄ•Â∫¶</option>
                                        <option value="normal">ÈÄöÂ∏∏</option>
                                        <option value="attention">Ë¶ÅÊ≥®ÊÑè</option>
                                        <option value="urgent">Á∑äÊÄ•</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-3">
                                <button class="btn btn-outline" id="clearFilters">„ÇØ„É™„Ç¢</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ÁèæÂ†¥„Ç´„Éº„ÉâË°®Á§∫ -->
            <section class="sites-section">
                <div class="sites-header">
                    <h2>ÁèæÂ†¥‰∏ÄË¶ß</h2>
                    <div class="view-toggle">
                        <button class="toggle-btn active" data-view="cards">
                            <span>üìã</span>
                            „Ç´„Éº„Éâ
                        </button>
                        <button class="toggle-btn" data-view="list">
                            <span>üìù</span>
                            „É™„Çπ„Éà
                        </button>
                    </div>
                </div>

                <!-- „Ç´„Éº„ÉâË°®Á§∫ -->
                <div class="sites-grid" id="sitesGrid">
                    <!-- ÁèæÂ†¥„Ç´„Éº„Éâ„ÅåÂãïÁöÑ„Å´ÁîüÊàê„Åï„Çå„Çã -->
                </div>

                <!-- „É™„Çπ„ÉàË°®Á§∫ -->
                <div class="sites-list" id="sitesList" style="display: none;">
                    <div class="card">
                        <div class="card-body p-0">
                            <div class="table-container">
                                <table class="sites-table">
                                    <thead>
                                        <tr>
                                            <th>Ê°à‰ª∂Âêç</th>
                                            <th>È°ßÂÆ¢</th>
                                            <th>ÁèæÂ†¥ÁÆ°ÁêÜËÄÖ</th>
                                            <th>Â∑•Êúü</th>
                                            <th>ÈÄ≤Êçó</th>
                                            <th>„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                                            <th>Á∑äÊÄ•Â∫¶</th>
                                            <th>Êìç‰Ωú</th>
                                        </tr>
                                    </thead>
                                    <tbody id="sitesTableBody">
                                        <!-- ÁèæÂ†¥„Éá„Éº„Çø„ÅåÂãïÁöÑ„Å´ÊåøÂÖ•„Åï„Çå„Çã -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- „Éá„Éº„Çø„Åå„Å™„ÅÑÂ†¥Âêà„ÅÆË°®Á§∫ -->
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-icon">üèóÔ∏è</div>
                    <h3>ÁèæÂ†¥„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</h3>
                    <p>ÂèóÊ≥®Ê∏à„Åø„ÅÆÊ°à‰ª∂„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</p>
                    <a href="index.html" class="btn btn-primary">„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„Éâ„Å∏</a>
                </div>
            </section>
        </div>
    </main>

    <!-- ÁèæÂ†¥Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div class="modal" id="siteDetailModal">
        <div class="modal-backdrop" onclick="closeModal('siteDetailModal')"></div>
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h3 id="siteDetailTitle">ÁèæÂ†¥Ë©≥Á¥∞</h3>
                <button class="modal-close" onclick="closeModal('siteDetailModal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="site-detail-content">
                    <div class="row">
                        <div class="col-8">
                            <div class="detail-section">
                                <h4>Âü∫Êú¨ÊÉÖÂ†±</h4>
                                <div class="detail-grid">
                                    <div class="detail-item">
                                        <label>Ê°à‰ª∂Âêç</label>
                                        <span id="detailProjectName">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>È°ßÂÆ¢Âêç</label>
                                        <span id="detailClientName">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>ÁèæÂ†¥‰ΩèÊâÄ</label>
                                        <span id="detailSiteAddress">-</span>
                                    </div>
                                    <div class="detail-item">
                                        <label>ÁèæÂ†¥ÁÆ°ÁêÜËÄÖ</label>
                                        <span id="detailSiteManager">-</span>
                                    </div>
                                </div>
                            </div>

                            <div class="detail-section">
                                <h4>Â∑•Á®ã„ÉªÈÄ≤Êçó</h4>
                                <div class="progress-container">
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="detailProgress" style="width: 0%"></div>
                                    </div>
                                    <span class="progress-text" id="detailProgressText">0%</span>
                                </div>
                                <div class="schedule-details">
                                    <div class="schedule-row">
                                        <span>ÁùÄÂ∑•‰∫àÂÆöÔºö</span>
                                        <span id="detailStartDate">-</span>
                                    </div>
                                    <div class="schedule-row">
                                        <span>ÂÆå‰∫Ü‰∫àÂÆöÔºö</span>
                                        <span id="detailEndDate">-</span>
                                    </div>
                                    <div class="schedule-row">
                                        <span>ÂÆüÁùÄÂ∑•Êó•Ôºö</span>
                                        <span id="detailActualStartDate">-</span>
                                    </div>
                                    <div class="schedule-row">
                                        <span>ÊÆã„ÇäÊó•Êï∞Ôºö</span>
                                        <span id="detailRemainingDays" class="remaining-days">-</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-4">
                            <div class="detail-section">
                                <h4>„ÇØ„Ç§„ÉÉ„ÇØ„Ç¢„ÇØ„Ç∑„Éß„É≥</h4>
                                <div class="quick-actions">
                                    <button class="action-btn" id="detailCallClient">
                                        <span class="action-icon">üìû</span>
                                        È°ßÂÆ¢„Å´ÈõªË©±
                                    </button>
                                    <button class="action-btn" id="detailUpdateStatus">
                                        <span class="action-icon">üìù</span>
                                        „Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞
                                    </button>
                                    <button class="action-btn" id="detailViewProject">
                                        <span class="action-icon">üëÅÔ∏è</span>
                                        Ê°à‰ª∂Ë©≥Á¥∞„ÇíË¶ã„Çã
                                    </button>
                                </div>
                            </div>

                            <div class="detail-section">
                                <h4>Á∑äÊÄ•Â∫¶Ë®≠ÂÆö</h4>
                                <select class="form-control" id="detailUrgency">
                                    <option value="normal">ÈÄöÂ∏∏</option>
                                    <option value="attention">Ë¶ÅÊ≥®ÊÑè</option>
                                    <option value="urgent">Á∑äÊÄ•</option>
                                </select>
                                <button class="btn btn-sm btn-primary mt-2" id="updateUrgencyBtn">Êõ¥Êñ∞</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal('siteDetailModal')">Èñâ„Åò„Çã</button>
            </div>
        </div>
    </div>

    <!-- ÈÄöÁü•„Éà„Éº„Çπ„Éà -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- JavaScript -->
    <script src="js/utils.js"></script>
    <script src="js/data-manager.js"></script>
    <script src="js/project-handler.js"></script>
    <script src="js/status-manager.js"></script>
    <script src="js/app.js"></script>
    <script>
        // „Éö„Éº„Ç∏ÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÂàùÊúüÂåñ
            initializeApp();
            
            // ÁèæÂ†¥„Éá„Éº„ÇøË™≠„ÅøËæº„Åø„ÉªË°®Á§∫
            loadSiteManagement();
            
            // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö
            setupEventListeners();
        });

        // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„ÉºË®≠ÂÆö
        function setupEventListeners() {
            // Êõ¥Êñ∞„Éú„Çø„É≥
            document.getElementById('refreshBtn').addEventListener('click', function() {
                refreshSiteData();
            });

            // „Éï„Ç£„É´„Çø„Éº
            document.getElementById('statusFilter').addEventListener('change', filterSites);
            document.getElementById('managerFilter').addEventListener('change', filterSites);
            document.getElementById('urgencyFilter').addEventListener('change', filterSites);
            document.getElementById('clearFilters').addEventListener('click', clearFilters);

            // Ë°®Á§∫Âàá„ÇäÊõø„Åà
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    toggleView(this.dataset.view);
                });
            });

            // Á∑äÊÄ•Â∫¶Êõ¥Êñ∞
            document.getElementById('updateUrgencyBtn').addEventListener('click', function() {
                updateSiteUrgency();
            });
        }

        // Ë°®Á§∫Âàá„ÇäÊõø„Åà
        function toggleView(view) {
            // „Éú„Çø„É≥„ÅÆÁä∂ÊÖãÊõ¥Êñ∞
            document.querySelectorAll('.toggle-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-view="${view}"]`).classList.add('active');

            // Ë°®Á§∫Âàá„ÇäÊõø„Åà
            if (view === 'cards') {
                document.getElementById('sitesGrid').style.display = 'grid';
                document.getElementById('sitesList').style.display = 'none';
            } else {
                document.getElementById('sitesGrid').style.display = 'none';
                document.getElementById('sitesList').style.display = 'block';
            }
        }

        // „É¢„Éº„ÉÄ„É´ÈñãÈñâ
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // ÁèæÂ†¥Ë©≥Á¥∞Ë°®Á§∫
        function showSiteDetail(siteId) {
            // ÁèæÂ†¥„Éá„Éº„Çø„ÇíÂèñÂæó„Åó„Å¶„É¢„Éº„ÉÄ„É´„Å´Ë°®Á§∫
            console.log('ÁèæÂ†¥Ë©≥Á¥∞Ë°®Á§∫:', siteId);
            openModal('siteDetailModal');
        }

        // „Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÈñ¢Êï∞ÔºàÂæå„ÅßÂÆüË£ÖÔºâ
        function initializeApp() {
            console.log('„Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥ÂàùÊúüÂåñ‰∏≠...');
        }

        function loadSiteManagement() {
            console.log('ÁèæÂ†¥ÁÆ°ÁêÜ„Éá„Éº„ÇøË™≠„ÅøËæº„Åø‰∏≠...');
        }

        function refreshSiteData() {
            console.log('ÁèæÂ†¥„Éá„Éº„ÇøÊõ¥Êñ∞‰∏≠...');
        }

        function filterSites() {
            console.log('ÁèæÂ†¥„Éï„Ç£„É´„Çø„É™„É≥„Ç∞‰∏≠...');
        }

        function clearFilters() {
            console.log('„Éï„Ç£„É´„Çø„Éº„ÇØ„É™„Ç¢‰∏≠...');
        }

        function updateSiteUrgency() {
            console.log('Á∑äÊÄ•Â∫¶Êõ¥Êñ∞‰∏≠...');
        }
    </script>
</body>
</html>
